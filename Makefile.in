#MODEL=ftm-50s
MODEL=ftm-100s
#MODEL=i686

TARGET=$(TOPDIR)/target/$(MODEL)
EXEC_PREFIX=$(TARGET)/usr/bin
LIB_PREFIX=$(TARGET)/usr/lib
CONF_PREFIX=$(TARGET)/etc
CGI_PREFIX=$(TARGET)/www/cgi-bin
export MODEL

COMMON_CFLAGS= -c -g -Wall -DDEBUG \
				-I. \
				-I$(TOPDIR)/ftm \
				-I$(TOPDIR)/ftom \
				-I$(TOPDIR)/ftdm \
				-I$(TOPDIR)/ftdm/client \
				-I$(TOPDIR)/ftom/client \
				-I$(TOPDIR)/ftom/cmdline\
				-I$(TOPDIR)/ftom/tpclient
COMMON_LDFLAGS= -Wl,--no-as-needed\
				-L.\
				-L$(TOPDIR)/ftm \
				-L$(TOPDIR)/ftom \
				-L$(TOPDIR)/ftdm \
				-L$(TOPDIR)/ftdm/client \
				-L$(TOPDIR)/ftom/client \
				-L$(TOPDIR)/ftom/cmdline \
				-L$(TOPDIR)/ftom/tpclient

ifeq ("$(MODEL)","ftm-50s")
CC=armv5-linux-gcc
AR=armv5-linux-ar
CFLAGS=-fPIC \
		$(COMMON_CFLAGS)\
		-I$(TOPDIR)/devtools/include\
		-I/home/xtra/ftm/build/ftm-50s/_root/include\
		-I/home/xtra/ftm/build/ftm-50s/_root/usr/include\
		-I/home/xtra/ftm/build/ftm-50s/_root/usr/local/include\
		-I/home/xtra/ftm/build/ftm-50s/_root/usr/include/cjson
LDFLAGS=$(COMMON_LDFLAGS)\
		-L$(TOPDIR)/devtools/lib\
		-L/home/xtra/ftm/build/ftm-50s/_root/lib \
		-L/home/xtra/ftm/build/ftm-50s/_root/usr/lib \
		-L/home/xtra/ftm/build/ftm-50s/_root/usr/local/lib 
else ifeq ("$(MODEL)","ftm-100s")
CC=arm-openwrt-linux-uclibcgnueabi-gcc
AR=arm-openwrt-linux-uclibcgnueabi-ar
CFLAGS=-fPIC \
		$(COMMON_CFLAGS) \
		-I$(TOPDIR)/devtools/include \
		-I/home/xtra/ftm/build/ftm-100s/_root/include\
		-I/home/xtra/ftm/build/ftm-100s/_root/usr/include\
		-I/home/xtra/ftm/build/ftm-100s/_root/usr/local/include\
		-I/home/xtra/ftm/build/ftm-100s/_root/usr/include/cjson

LDFLAGS= $(COMMON_LDFLAGS)\
		-L/home/xtra/ftm/build/ftm-100s/_root/lib \
		-L/home/xtra/ftm/build/ftm-100s/_root/usr/lib \
		-L/home/xtra/ftm/build/ftm-100s/_root/usr/local/lib \

else
CC=gcc
CFLAGS= $(COMMON_CFLAGS) \
		-I/usr/local/include \
		-I$(TARGET)/usr/local/include\
		-I$(TOPDIR)/mosquitto-1.4.8/lib \
		-I$(TOPDIR)/libconfig-1.4.9/lib \
		-I$(TOPDIR)/net-snmp-5.7.2/include \
		-I$(TOPDIR)/sqlite-3.8.9\
		-I$(TOPDIR)/qdecoder-12.0.4/src\
		-I$(TOPDIR)/mxml-2.9\
		-I$(TOPDIR)/cjson

LDFLAGS= -L/usr/local/lib \
		$(COMMON_LDFLAGS)\
		-L/usr/local/lib \
		-L$(TARGET)/usr/local/lib\
		-L$(TOPDIR)/sqlite-3.8.9/.libs \
		-L$(TOPDIR)/mosquitto-1.4.8/lib \
		-L$(TOPDIR)/libconfig-1.4.9/lib \
		-L$(TOPDIR)/qdecoder-12.0.4/src \
		-L$(TOPDIR)/mxml-2.9\
		-L$(TOPDIR)/cjson

endif
